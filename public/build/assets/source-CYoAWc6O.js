import{r,j as e,H as L}from"./app-cgYOdWZy.js";import{A as $,F as N}from"./feed-BERmjH1F.js";import{P as b,L as z}from"./layout-B527ElJ-.js";/* empty css            */import"./square-arrow-out-up-right-BEnrCFjP.js";const y=10;function S({source:t}){const[a,E]=r.useState([]),[u,f]=r.useState(1),[m,g]=r.useState(!1),[h,p]=r.useState(!0),[c,w]=r.useState(0),d=r.useRef(null),j=r.useRef(null),x=async(n,s=!1)=>{if(t){g(!0);try{const o=await fetch(`/api/news/source/${encodeURIComponent(t)}?page=${n}&limit=${y}`);if(!o.ok)throw new Error("Failed to fetch news");const i=await o.json();E(l=>s?i:[...l,...i]),i.length<y&&p(!1)}catch(o){console.error(o)}finally{g(!1),w(0)}}};return r.useEffect(()=>{f(1),p(!0),x(1,!0)},[t]),r.useEffect(()=>{const n=()=>{window.innerHeight+window.scrollY>=document.body.offsetHeight-200&&!m&&h&&f(s=>s+1)};return window.addEventListener("scroll",n),()=>window.removeEventListener("scroll",n)},[m,h]),r.useEffect(()=>{u!==1&&x(u)},[u]),r.useEffect(()=>{const n=j.current;if(!n)return;const s=l=>{window.scrollY===0&&(d.current=l.touches[0].clientY)},o=l=>{if(d.current!==null){const v=l.touches[0].clientY-d.current;v>0&&w(Math.min(v,100))}},i=()=>{c>60?(f(1),p(!0),x(1,!0)):w(0),d.current=null};return n.addEventListener("touchstart",s),n.addEventListener("touchmove",o),n.addEventListener("touchend",i),()=>{n.removeEventListener("touchstart",s),n.removeEventListener("touchmove",o),n.removeEventListener("touchend",i)}},[c,t]),a.length>0?a[0].title:`${t}`,a.length>0?a[0].summary||`${t}`:`${t}`,a.length>0&&a[0].image,e.jsxs(e.Fragment,{children:[e.jsxs(L,{children:[e.jsx("title",{children:`Berita ${t} Terbaru - Centralize News`}),e.jsx("meta",{name:"description",content:`Berita terbaru dari ${t}`}),e.jsx("link",{rel:"canonical",href:`https://centralizenews.com/sources/${t}`}),e.jsx("meta",{property:"og:title",content:`Berita ${t} Terbaru - Centralize News`}),e.jsx("meta",{property:"og:description",content:`Berita terbaru dari ${t}`}),e.jsx("meta",{property:"og:url",content:`https://centralizenews.com/sources/${t}`}),e.jsx("meta",{property:"og:image",content:"https://centralizenews.com/no-image.png"}),e.jsx("meta",{property:"og:type",content:"article"}),e.jsx("meta",{name:"twitter:card",content:"summary_large_image"}),e.jsx("meta",{name:"twitter:title",content:`Berita ${t} Terbaru - Centralize News`}),e.jsx("meta",{name:"twitter:description",content:`Berita terbaru dari ${t}`}),e.jsx("meta",{name:"twitter:image",content:"https://centralizenews.com/no-image.png"})]}),e.jsxs("div",{ref:j,className:"flex flex-col items-center pt-6 pb-24 transition-transform duration-200",style:{transform:`translateY(${c}px)`},children:[c>0&&e.jsx("div",{className:"absolute top-2 text-gray-500",children:c>60?e.jsx($,{}):"Pull to refresh"}),!m&&e.jsx("div",{className:"mt-20",children:e.jsx("h2",{className:"text-2xl text-center mb-8",children:t})}),e.jsxs("div",{className:"w-full max-w-md mt-1",children:[a.map((n,s)=>e.jsx(N,{items:[n]},s)),m&&e.jsx(b,{src:document.documentElement.classList.contains("dark")?"/cns-white.png":"/cns-black.png",size:90}),!h&&e.jsx("p",{className:"text-center py-4",children:"No more news"})]})]})]})}S.layout=t=>e.jsx(z,{children:t});export{S as default};
